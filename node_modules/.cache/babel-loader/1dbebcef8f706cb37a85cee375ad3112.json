{"ast":null,"code":"import _defineProperty from \"/Users/sandraabernathy/IdeaProjects/Project3/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/sandraabernathy/IdeaProjects/Project3/src/UserContainer/index.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { Component } from 'react';\n\nclass User extends Component {\n  constructor(props) {\n    super(props);\n\n    this.setUser = () => {\n      this.setState({\n        currentUser: this.props.currentUser,\n        userToEdit: this.props.currentUser\n      });\n    };\n\n    this.componentDidMount = () => {\n      this.setUser();\n    };\n\n    this.deleteAccount = async e => {\n      e.preventDefault();\n      console.log('user from delete route: ', this.state.currentUser);\n\n      try {\n        const deleteRequest = await fetch('http://localhost:8080/users/' + this.state.currentUser.id, {\n          method: 'DELETE',\n          credentials: 'include'\n        });\n\n        if (deleteRequest.status !== 200) {\n          throw Error(\"Delete Request Not Working\");\n        }\n\n        this.setState({\n          currentUser: ''\n        });\n\n        if (this.state.currentUser === '') {\n          this.props.history.push('/');\n        }\n      } catch (err) {\n        return err;\n      }\n\n      this.props.handleLogin(this.state.currentUser);\n    };\n\n    this.handleFormChange = e => {\n      // e.preventDefault()\n      this.setState({\n        userToEdit: _objectSpread({}, this.state.userToEdit, {\n          [e.target.name]: e.target.value\n        })\n      });\n      console.log(\"user to edit handle for change\", this.state.userToEdit);\n    };\n\n    this.editAccount = async e => {\n      e.preventDefault();\n      console.log(\"user to edit : edit route \", this.state.userToEdit);\n      console.log(\"this.state.currentUser\", this.state.currentUser);\n\n      try {\n        const editRequest = await fetch('http://localhost:8080/users/' + this.state.currentUser.id, {\n          method: 'PUT',\n          credentials: 'include',\n          body: JSON.stringify(this.state.userToEdit),\n          headers: {\n            'Content-Type': 'application/json'\n          }\n        });\n\n        if (editRequest.status !== 200) {\n          throw Error('Edit Request Not Working');\n        }\n\n        const editResponse = await editRequest.json();\n        console.log(\"editResponse: \", editResponse);\n      } catch (err) {\n        console.log('Error from edit route: ', err);\n        return err;\n      }\n\n      this.setState({\n        currentUser: this.state.userToEdit\n      });\n      alert(\"You're account has been updated!\");\n      console.log(\"this.state.currentUser\", this.state.currentUser);\n      console.log(\"this.props.currentUser\", this.props.currentUser);\n      this.props.handleLogin(this.state.currentUser);\n    };\n\n    this.isLoggedin = () => {\n      if (this.state.currentUser) {\n        return React.createElement(\"div\", {\n          className: \"editInfo\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 107\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"editHeader\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 108\n          },\n          __self: this\n        }, React.createElement(\"h1\", {\n          className: \"editHeader\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 109\n          },\n          __self: this\n        }, \"Edit Your Account\")), React.createElement(\"div\", {\n          className: \"editBody\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 111\n          },\n          __self: this\n        }, React.createElement(\"form\", {\n          onSubmit: this.editAccount,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 112\n          },\n          __self: this\n        }, React.createElement(\"input\", {\n          className: \"textBox\",\n          placeholder: this.state.currentUser.email,\n          type: \"email\",\n          name: \"email\",\n          onChange: this.handleFormChange,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 113\n          },\n          __self: this\n        }), React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 113\n          },\n          __self: this\n        }), React.createElement(\"input\", {\n          className: \"textBox\",\n          placeholder: \"********\",\n          type: \"password\",\n          name: \"password\",\n          onChange: this.handleFormChange,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 114\n          },\n          __self: this\n        }), React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 114\n          },\n          __self: this\n        }), React.createElement(\"input\", {\n          className: \"login\",\n          id: \"uploadButton\",\n          type: \"submit\",\n          value: \"Update Info!\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 115\n          },\n          __self: this\n        }))), React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 117\n          },\n          __self: this\n        }), React.createElement(\"section\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 118\n          },\n          __self: this\n        }, React.createElement(\"button\", {\n          className: \"deleteButton\",\n          onClick: this.deleteAccount,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 119\n          },\n          __self: this\n        }, \"Delete Account\")));\n      } else {\n        this.props.history.push('login');\n      }\n    };\n\n    this.state = {\n      currentUser: {\n        id: '',\n        email: '',\n        password: ''\n      },\n      userToEdit: {\n        id: null,\n        email: '',\n        password: ''\n      }\n    };\n  }\n\n  render() {\n    console.log(\"currentUser from render: \", this.state.currentUser);\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, this.isLoggedin());\n  }\n\n}\n\nexport default User;","map":{"version":3,"sources":["/Users/sandraabernathy/IdeaProjects/Project3/src/UserContainer/index.js"],"names":["React","Component","User","constructor","props","setUser","setState","currentUser","userToEdit","componentDidMount","deleteAccount","e","preventDefault","console","log","state","deleteRequest","fetch","id","method","credentials","status","Error","history","push","err","handleLogin","handleFormChange","target","name","value","editAccount","editRequest","body","JSON","stringify","headers","editResponse","json","alert","isLoggedin","email","password","render"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,IAAeC,SAAf,QAA+B,OAA/B;;AAGA,MAAMC,IAAN,SAAmBD,SAAnB,CAA6B;AACzBE,EAAAA,WAAW,CAACC,KAAD,EAAO;AACd,UAAMA,KAAN;;AADc,SAiBlBC,OAjBkB,GAiBT,MAAM;AACX,WAAKC,QAAL,CAAc;AACdC,QAAAA,WAAW,EAAE,KAAKH,KAAL,CAAWG,WADV;AAEdC,QAAAA,UAAU,EAAE,KAAKJ,KAAL,CAAWG;AAFT,OAAd;AAIH,KAtBiB;;AAAA,SAwBlBE,iBAxBkB,GAwBC,MAAK;AACpB,WAAKJ,OAAL;AACH,KA1BiB;;AAAA,SA4BlBK,aA5BkB,GA4BF,MAAOC,CAAP,IAAY;AACxBA,MAAAA,CAAC,CAACC,cAAF;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAY,0BAAZ,EAAwC,KAAKC,KAAL,CAAWR,WAAnD;;AAEA,UAAG;AACC,cAAMS,aAAa,GAAG,MAAMC,KAAK,CAAE,iCAA+B,KAAKF,KAAL,CAAWR,WAAX,CAAuBW,EAAxD,EAA4D;AACzFC,UAAAA,MAAM,EAAE,QADiF;AAEzFC,UAAAA,WAAW,EAAE;AAF4E,SAA5D,CAAjC;;AAIA,YAAGJ,aAAa,CAACK,MAAd,KAAyB,GAA5B,EAAgC;AAC5B,gBAAMC,KAAK,CAAE,4BAAF,CAAX;AACH;;AACD,aAAKhB,QAAL,CAAc;AACVC,UAAAA,WAAW,EAAE;AADH,SAAd;;AAGA,YAAG,KAAKQ,KAAL,CAAWR,WAAX,KAAyB,EAA5B,EAA+B;AAC3B,eAAKH,KAAL,CAAWmB,OAAX,CAAmBC,IAAnB,CAAwB,GAAxB;AACH;AACJ,OAdD,CAcC,OAAOC,GAAP,EAAW;AACR,eAAOA,GAAP;AACH;;AACD,WAAKrB,KAAL,CAAWsB,WAAX,CAAuB,KAAKX,KAAL,CAAWR,WAAlC;AAEH,KAnDiB;;AAAA,SAqDlBoB,gBArDkB,GAqDEhB,CAAD,IAAO;AACtB;AACA,WAAKL,QAAL,CAAc;AACVE,QAAAA,UAAU,oBAAM,KAAKO,KAAL,CAAWP,UAAjB;AACV,WAACG,CAAC,CAACiB,MAAF,CAASC,IAAV,GAAiBlB,CAAC,CAACiB,MAAF,CAASE;AADhB;AADA,OAAd;AAKAjB,MAAAA,OAAO,CAACC,GAAR,CAAY,gCAAZ,EAA8C,KAAKC,KAAL,CAAWP,UAAzD;AACH,KA7DiB;;AAAA,SA+DlBuB,WA/DkB,GA+DJ,MAAOpB,CAAP,IAAa;AACvBA,MAAAA,CAAC,CAACC,cAAF;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAY,4BAAZ,EAA0C,KAAKC,KAAL,CAAWP,UAArD;AACAK,MAAAA,OAAO,CAACC,GAAR,CAAY,wBAAZ,EAAsC,KAAKC,KAAL,CAAWR,WAAjD;;AAEA,UAAG;AACC,cAAMyB,WAAW,GAAG,MAAMf,KAAK,CAAE,iCAA+B,KAAKF,KAAL,CAAWR,WAAX,CAAuBW,EAAxD,EAA4D;AACvFC,UAAAA,MAAM,EAAE,KAD+E;AAEvFC,UAAAA,WAAW,EAAE,SAF0E;AAGvFa,UAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe,KAAKpB,KAAL,CAAWP,UAA1B,CAHiF;AAIvF4B,UAAAA,OAAO,EAAE;AACL,4BAAiB;AADZ;AAJ8E,SAA5D,CAA/B;;AAQA,YAAGJ,WAAW,CAACX,MAAZ,KAAuB,GAA1B,EAA8B;AAC1B,gBAAMC,KAAK,CAAC,0BAAD,CAAX;AACH;;AACD,cAAMe,YAAY,GAAG,MAAML,WAAW,CAACM,IAAZ,EAA3B;AACAzB,QAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ,EAA6BuB,YAA7B;AAEH,OAfD,CAeC,OAAMZ,GAAN,EAAU;AACPZ,QAAAA,OAAO,CAACC,GAAR,CAAY,yBAAZ,EAAuCW,GAAvC;AACA,eAAOA,GAAP;AACH;;AACD,WAAKnB,QAAL,CAAc;AACVC,QAAAA,WAAW,EAAE,KAAKQ,KAAL,CAAWP;AADd,OAAd;AAGA+B,MAAAA,KAAK,CAAC,kCAAD,CAAL;AACA1B,MAAAA,OAAO,CAACC,GAAR,CAAY,wBAAZ,EAAsC,KAAKC,KAAL,CAAWR,WAAjD;AACAM,MAAAA,OAAO,CAACC,GAAR,CAAY,wBAAZ,EAAsC,KAAKV,KAAL,CAAWG,WAAjD;AACA,WAAKH,KAAL,CAAWsB,WAAX,CAAuB,KAAKX,KAAL,CAAWR,WAAlC;AAGH,KAhGiB;;AAAA,SAmGlBiC,UAnGkB,GAmGL,MAAM;AACf,UAAG,KAAKzB,KAAL,CAAWR,WAAd,EAA0B;AACtB,eACI;AAAK,UAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACA;AAAK,UAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACI;AAAI,UAAA,SAAS,EAAC,YAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BADJ,CADA,EAIJ;AAAK,UAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACI;AAAM,UAAA,QAAQ,EAAE,KAAKwB,WAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACI;AAAO,UAAA,SAAS,EAAC,SAAjB;AAA2B,UAAA,WAAW,EAAE,KAAKhB,KAAL,CAAWR,WAAX,CAAuBkC,KAA/D;AAAsE,UAAA,IAAI,EAAC,OAA3E;AAAmF,UAAA,IAAI,EAAC,OAAxF;AAAgG,UAAA,QAAQ,EAAE,KAAKd,gBAA/G;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ,EACuI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADvI,EAEI;AAAO,UAAA,SAAS,EAAC,SAAjB;AAA2B,UAAA,WAAW,EAAC,UAAvC;AAAkD,UAAA,IAAI,EAAC,UAAvD;AAAkE,UAAA,IAAI,EAAC,UAAvE;AAAmF,UAAA,QAAQ,EAAE,KAAKA,gBAAlG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAFJ,EAEyH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAFzH,EAGI;AAAO,UAAA,SAAS,EAAC,OAAjB;AAAyB,UAAA,EAAE,EAAC,cAA5B;AAA2C,UAAA,IAAI,EAAC,QAAhD;AAAyD,UAAA,KAAK,EAAC,cAA/D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAHJ,CADJ,CAJI,EAUE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAVF,EAWJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACI;AAAQ,UAAA,SAAS,EAAC,cAAlB;AAAiC,UAAA,OAAO,EAAE,KAAKjB,aAA/C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BADJ,CAXI,CADJ;AAiBH,OAlBD,MAkBO;AACH,aAAKN,KAAL,CAAWmB,OAAX,CAAmBC,IAAnB,CAAwB,OAAxB;AACH;AACJ,KAzHiB;;AAGd,SAAKT,KAAL,GAAW;AACXR,MAAAA,WAAW,EAAE;AACTW,QAAAA,EAAE,EAAE,EADK;AAETuB,QAAAA,KAAK,EAAE,EAFE;AAGTC,QAAAA,QAAQ,EAAE;AAHD,OADF;AAMXlC,MAAAA,UAAU,EAAC;AACPU,QAAAA,EAAE,EAAE,IADG;AAEPuB,QAAAA,KAAK,EAAE,EAFA;AAGPC,QAAAA,QAAQ,EAAE;AAHH;AANA,KAAX;AAYH;;AA4GDC,EAAAA,MAAM,GAAE;AACJ9B,IAAAA,OAAO,CAACC,GAAR,CAAY,2BAAZ,EAAyC,KAAKC,KAAL,CAAWR,WAApD;AACA,WACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,KAAKiC,UAAL,EADF,CADJ;AAKH;;AAnIwB;;AAsI7B,eAAetC,IAAf","sourcesContent":["import React, {Component} from 'react'\n\n\nclass User extends Component {\n    constructor(props){\n        super(props)\n\n        this.state={\n        currentUser: {\n            id: '',\n            email: '',\n            password: ''        \n        },\n        userToEdit:{\n            id: null,\n            email: '',\n            password: '' \n        }\n        }\n    }\n\n    setUser =() => {\n        this.setState({\n        currentUser: this.props.currentUser,\n        userToEdit: this.props.currentUser\n    })\n    }\n    \n    componentDidMount =()=> {\n        this.setUser();\n    }\n\n    deleteAccount = async (e)=> {\n        e.preventDefault();\n        console.log('user from delete route: ', this.state.currentUser)\n\n        try{\n            const deleteRequest = await fetch ('http://localhost:8080/users/'+this.state.currentUser.id, {\n                method: 'DELETE',\n                credentials: 'include'\n            })\n            if(deleteRequest.status !== 200){\n                throw Error (\"Delete Request Not Working\")\n            }\n            this.setState({\n                currentUser: ''\n            })\n            if(this.state.currentUser===''){\n                this.props.history.push('/')\n            }\n        }catch (err){\n            return(err)\n        }\n        this.props.handleLogin(this.state.currentUser);\n\n    }\n\n    handleFormChange = (e) => {\n        // e.preventDefault()\n        this.setState({\n            userToEdit: {...this.state.userToEdit,\n            [e.target.name]: e.target.value}\n        })\n \n        console.log(\"user to edit handle for change\", this.state.userToEdit)\n    }\n\n    editAccount = async (e) => {\n        e.preventDefault();\n        console.log(\"user to edit : edit route \", this.state.userToEdit)\n        console.log(\"this.state.currentUser\", this.state.currentUser)\n\n        try{\n            const editRequest = await fetch ('http://localhost:8080/users/'+this.state.currentUser.id, {\n                method: 'PUT',\n                credentials: 'include',\n                body: JSON.stringify(this.state.userToEdit),\n                headers: {\n                    'Content-Type' : 'application/json'\n                }\n            })\n            if(editRequest.status !== 200){\n                throw Error('Edit Request Not Working')\n            }\n            const editResponse = await editRequest.json()\n            console.log(\"editResponse: \",editResponse)\n\n        }catch(err){\n            console.log('Error from edit route: ', err)\n            return(err)\n        }\n        this.setState({\n            currentUser: this.state.userToEdit\n        })\n        alert(\"You're account has been updated!\")\n        console.log(\"this.state.currentUser\", this.state.currentUser)\n        console.log(\"this.props.currentUser\", this.props.currentUser)\n        this.props.handleLogin(this.state.currentUser);\n\n\n    }\n\n\n    isLoggedin = () => {\n        if(this.state.currentUser){\n            return(\n                <div className=\"editInfo\">\n                <div className=\"editHeader\">\n                    <h1 className='editHeader'>Edit Your Account</h1>\n                </div>\n            <div className=\"editBody\">\n                <form onSubmit={this.editAccount}>  \n                    <input className=\"textBox\" placeholder={this.state.currentUser.email} type=\"email\" name=\"email\" onChange={this.handleFormChange} /><br/>\n                    <input className='textBox' placeholder=\"********\" type=\"password\" name=\"password\"  onChange={this.handleFormChange}/><br/>\n                    <input className='login' id=\"uploadButton\" type='submit' value=\"Update Info!\"/>\n                </form>\n            </div><br/>\n            <section>\n                <button className=\"deleteButton\" onClick={this.deleteAccount}>Delete Account</button>\n            </section>\n        </div>\n            )\n        } else {\n            this.props.history.push('login')\n        }\n    }\n\n    render(){\n        console.log(\"currentUser from render: \", this.state.currentUser)\n        return(\n            <div>\n             {this.isLoggedin()}\n            </div>\n        )\n    }\n}\n\nexport default User\n"]},"metadata":{},"sourceType":"module"}